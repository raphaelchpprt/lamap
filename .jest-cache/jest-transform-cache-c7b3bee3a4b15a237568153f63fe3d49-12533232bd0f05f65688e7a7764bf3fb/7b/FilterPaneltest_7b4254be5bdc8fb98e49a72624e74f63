95190a8f49cfbcf241e1619533c9b063
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _FilterPanel = /*#__PURE__*/ _interop_require_default(require("../../components/FilterPanel"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
describe('FilterPanel', ()=>{
    const mockOnFilterChange = jest.fn();
    const defaultSelectedTypes = [
        'Ressourcerie',
        'AMAP'
    ];
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    it('displays all initiative types', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        expect(_react.screen.getByText('Ressourcerie')).toBeInTheDocument();
        expect(_react.screen.getByText('Repair Café')).toBeInTheDocument();
        expect(_react.screen.getByText('AMAP')).toBeInTheDocument();
        expect(_react.screen.getByText('Épicerie sociale')).toBeInTheDocument();
        expect(_react.screen.getByText('Fab Lab')).toBeInTheDocument();
    });
    it('displays selected types as checked', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        const ressourcerieCheckbox = _react.screen.getByRole('checkbox', {
            name: /Ressourcerie/
        });
        const amapCheckbox = _react.screen.getByRole('checkbox', {
            name: /AMAP/
        });
        const repairCafeCheckbox = _react.screen.getByRole('checkbox', {
            name: /Repair Café/
        });
        expect(ressourcerieCheckbox).toBeChecked();
        expect(amapCheckbox).toBeChecked();
        expect(repairCafeCheckbox).not.toBeChecked();
    });
    it('calls onFilterChange when selecting a type', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        const repairCafeCheckbox = _react.screen.getByRole('checkbox', {
            name: /Repair Café/
        });
        _react.fireEvent.click(repairCafeCheckbox);
        expect(mockOnFilterChange).toHaveBeenCalledWith([
            ...defaultSelectedTypes,
            'Repair Café'
        ]);
    });
    it('calls onFilterChange when deselecting a type', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        const ressourcerieCheckbox = _react.screen.getByRole('checkbox', {
            name: /Ressourcerie/
        });
        _react.fireEvent.click(ressourcerieCheckbox);
        expect(mockOnFilterChange).toHaveBeenCalledWith([
            'AMAP'
        ]);
    });
    it('selects all types when clicking "Select all"', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: [],
            onFilterChange: mockOnFilterChange
        }));
        const selectAllButton = _react.screen.getByText('Tout sélectionner');
        _react.fireEvent.click(selectAllButton);
        expect(mockOnFilterChange).toHaveBeenCalledWith(expect.arrayContaining([
            'Ressourcerie',
            'Repair Café',
            'AMAP',
            "Entreprise d'insertion",
            'Point de collecte',
            'Recyclerie',
            'Épicerie sociale',
            'Jardin partagé',
            'Fab Lab',
            'Coopérative',
            'Monnaie locale',
            'Tiers-lieu',
            'Autre'
        ]));
    });
    it('deselects all types when clicking "Deselect all"', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        const deselectAllButton = _react.screen.getByText('Tout désélectionner');
        _react.fireEvent.click(deselectAllButton);
        expect(mockOnFilterChange).toHaveBeenCalledWith([]);
    });
    it('displays initiative counters when provided', ()=>{
        const initiativeCounts = {
            Ressourcerie: 5,
            AMAP: 3,
            'Repair Café': 2
        };
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange,
            initiativeCounts: initiativeCounts
        }));
        expect(_react.screen.getByText('5')).toBeInTheDocument();
        expect(_react.screen.getByText('3')).toBeInTheDocument();
        expect(_react.screen.getByText('2')).toBeInTheDocument();
    });
    it('displays total filtered initiatives', ()=>{
        const initiativeCounts = {
            Ressourcerie: 5,
            AMAP: 3,
            'Repair Café': 2
        };
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: [
                'Ressourcerie',
                'AMAP'
            ],
            onFilterChange: mockOnFilterChange,
            initiativeCounts: initiativeCounts
        }));
        // 5 (Ressourcerie) + 3 (AMAP) = 8 selected out of 10 total
        expect(_react.screen.getByText(/8 \/ 10/)).toBeInTheDocument();
    });
    it('can be collapsed and expanded', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        // Initially expanded
        expect(_react.screen.getByRole('checkbox', {
            name: /Ressourcerie/
        })).toBeVisible();
        // Click collapse button
        const toggleButton = _react.screen.getByLabelText('Réduire');
        _react.fireEvent.click(toggleButton);
        // Checkboxes are hidden
        expect(_react.screen.queryByRole('checkbox', {
            name: /Ressourcerie/
        })).not.toBeInTheDocument();
        // Click again to expand
        const expandButton = _react.screen.getByLabelText('Développer');
        _react.fireEvent.click(expandButton);
        // Checkboxes are visible again
        expect(_react.screen.getByRole('checkbox', {
            name: /Ressourcerie/
        })).toBeVisible();
    });
    it('applies different visual styles to selected types', ()=>{
        const { container } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: [
                'Ressourcerie'
            ],
            onFilterChange: mockOnFilterChange
        }));
        // Find Ressourcerie label and verify it has selection class
        const labels = container.querySelectorAll('label');
        const ressourcerieLabel = Array.from(labels).find((label)=>label.textContent?.includes('Ressourcerie'));
        expect(ressourcerieLabel).toHaveClass('bg-primary-50');
    });
    it('displays colored visual indicator for each type', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        // Verify each type has its color indicator
        const colorIndicators = _react.screen.getAllByRole('checkbox').map((checkbox)=>checkbox.parentElement?.querySelector('.rounded-full'));
        expect(colorIndicators.length).toBeGreaterThan(0);
        colorIndicators.forEach((indicator)=>{
            expect(indicator).toBeInTheDocument();
        });
    });
    it('is accessible with appropriate ARIA attributes', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        // Checkboxes should be accessible
        const checkboxes = _react.screen.getAllByRole('checkbox');
        checkboxes.forEach((checkbox)=>{
            expect(checkbox).toBeEnabled();
        });
        // Buttons should have appropriate labels
        expect(_react.screen.getByLabelText(/Réduire|Développer/)).toBeInTheDocument();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9SYXBoYWVsL0RvY3VtZW50cy9ERVYubm9zeW5jL2xhbWFwL3NyYy9fX3Rlc3RzX18vY29tcG9uZW50cy9GaWx0ZXJQYW5lbC50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5cbmltcG9ydCBGaWx0ZXJQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvRmlsdGVyUGFuZWwnO1xuXG5pbXBvcnQgdHlwZSB7IEluaXRpYXRpdmVUeXBlIH0gZnJvbSAnQC90eXBlcy9pbml0aWF0aXZlJztcblxuZGVzY3JpYmUoJ0ZpbHRlclBhbmVsJywgKCkgPT4ge1xuICBjb25zdCBtb2NrT25GaWx0ZXJDaGFuZ2UgPSBqZXN0LmZuKCk7XG4gIGNvbnN0IGRlZmF1bHRTZWxlY3RlZFR5cGVzOiBJbml0aWF0aXZlVHlwZVtdID0gWydSZXNzb3VyY2VyaWUnLCAnQU1BUCddO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBpdCgnZGlzcGxheXMgYWxsIGluaXRpYXRpdmUgdHlwZXMnLCAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPEZpbHRlclBhbmVsXG4gICAgICAgIHNlbGVjdGVkVHlwZXM9e2RlZmF1bHRTZWxlY3RlZFR5cGVzfVxuICAgICAgICBvbkZpbHRlckNoYW5nZT17bW9ja09uRmlsdGVyQ2hhbmdlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Jlc3NvdXJjZXJpZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdSZXBhaXIgQ2Fmw6knKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQU1BUCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfDiXBpY2VyaWUgc29jaWFsZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdGYWIgTGFiJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdkaXNwbGF5cyBzZWxlY3RlZCB0eXBlcyBhcyBjaGVja2VkJywgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxGaWx0ZXJQYW5lbFxuICAgICAgICBzZWxlY3RlZFR5cGVzPXtkZWZhdWx0U2VsZWN0ZWRUeXBlc31cbiAgICAgICAgb25GaWx0ZXJDaGFuZ2U9e21vY2tPbkZpbHRlckNoYW5nZX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIGNvbnN0IHJlc3NvdXJjZXJpZUNoZWNrYm94ID0gc2NyZWVuLmdldEJ5Um9sZSgnY2hlY2tib3gnLCB7XG4gICAgICBuYW1lOiAvUmVzc291cmNlcmllLyxcbiAgICB9KTtcbiAgICBjb25zdCBhbWFwQ2hlY2tib3ggPSBzY3JlZW4uZ2V0QnlSb2xlKCdjaGVja2JveCcsIHsgbmFtZTogL0FNQVAvIH0pO1xuICAgIGNvbnN0IHJlcGFpckNhZmVDaGVja2JveCA9IHNjcmVlbi5nZXRCeVJvbGUoJ2NoZWNrYm94Jywge1xuICAgICAgbmFtZTogL1JlcGFpciBDYWbDqS8sXG4gICAgfSk7XG5cbiAgICBleHBlY3QocmVzc291cmNlcmllQ2hlY2tib3gpLnRvQmVDaGVja2VkKCk7XG4gICAgZXhwZWN0KGFtYXBDaGVja2JveCkudG9CZUNoZWNrZWQoKTtcbiAgICBleHBlY3QocmVwYWlyQ2FmZUNoZWNrYm94KS5ub3QudG9CZUNoZWNrZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ2NhbGxzIG9uRmlsdGVyQ2hhbmdlIHdoZW4gc2VsZWN0aW5nIGEgdHlwZScsICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8RmlsdGVyUGFuZWxcbiAgICAgICAgc2VsZWN0ZWRUeXBlcz17ZGVmYXVsdFNlbGVjdGVkVHlwZXN9XG4gICAgICAgIG9uRmlsdGVyQ2hhbmdlPXttb2NrT25GaWx0ZXJDaGFuZ2V9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCByZXBhaXJDYWZlQ2hlY2tib3ggPSBzY3JlZW4uZ2V0QnlSb2xlKCdjaGVja2JveCcsIHtcbiAgICAgIG5hbWU6IC9SZXBhaXIgQ2Fmw6kvLFxuICAgIH0pO1xuICAgIGZpcmVFdmVudC5jbGljayhyZXBhaXJDYWZlQ2hlY2tib3gpO1xuXG4gICAgZXhwZWN0KG1vY2tPbkZpbHRlckNoYW5nZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoW1xuICAgICAgLi4uZGVmYXVsdFNlbGVjdGVkVHlwZXMsXG4gICAgICAnUmVwYWlyIENhZsOpJyxcbiAgICBdKTtcbiAgfSk7XG5cbiAgaXQoJ2NhbGxzIG9uRmlsdGVyQ2hhbmdlIHdoZW4gZGVzZWxlY3RpbmcgYSB0eXBlJywgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxGaWx0ZXJQYW5lbFxuICAgICAgICBzZWxlY3RlZFR5cGVzPXtkZWZhdWx0U2VsZWN0ZWRUeXBlc31cbiAgICAgICAgb25GaWx0ZXJDaGFuZ2U9e21vY2tPbkZpbHRlckNoYW5nZX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIGNvbnN0IHJlc3NvdXJjZXJpZUNoZWNrYm94ID0gc2NyZWVuLmdldEJ5Um9sZSgnY2hlY2tib3gnLCB7XG4gICAgICBuYW1lOiAvUmVzc291cmNlcmllLyxcbiAgICB9KTtcbiAgICBmaXJlRXZlbnQuY2xpY2socmVzc291cmNlcmllQ2hlY2tib3gpO1xuXG4gICAgZXhwZWN0KG1vY2tPbkZpbHRlckNoYW5nZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoWydBTUFQJ10pO1xuICB9KTtcblxuICBpdCgnc2VsZWN0cyBhbGwgdHlwZXMgd2hlbiBjbGlja2luZyBcIlNlbGVjdCBhbGxcIicsICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8RmlsdGVyUGFuZWwgc2VsZWN0ZWRUeXBlcz17W119IG9uRmlsdGVyQ2hhbmdlPXttb2NrT25GaWx0ZXJDaGFuZ2V9IC8+XG4gICAgKTtcblxuICAgIGNvbnN0IHNlbGVjdEFsbEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ1RvdXQgc8OpbGVjdGlvbm5lcicpO1xuICAgIGZpcmVFdmVudC5jbGljayhzZWxlY3RBbGxCdXR0b24pO1xuXG4gICAgZXhwZWN0KG1vY2tPbkZpbHRlckNoYW5nZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICBleHBlY3QuYXJyYXlDb250YWluaW5nKFtcbiAgICAgICAgJ1Jlc3NvdXJjZXJpZScsXG4gICAgICAgICdSZXBhaXIgQ2Fmw6knLFxuICAgICAgICAnQU1BUCcsXG4gICAgICAgIFwiRW50cmVwcmlzZSBkJ2luc2VydGlvblwiLFxuICAgICAgICAnUG9pbnQgZGUgY29sbGVjdGUnLFxuICAgICAgICAnUmVjeWNsZXJpZScsXG4gICAgICAgICfDiXBpY2VyaWUgc29jaWFsZScsXG4gICAgICAgICdKYXJkaW4gcGFydGFnw6knLFxuICAgICAgICAnRmFiIExhYicsXG4gICAgICAgICdDb29ww6lyYXRpdmUnLFxuICAgICAgICAnTW9ubmFpZSBsb2NhbGUnLFxuICAgICAgICAnVGllcnMtbGlldScsXG4gICAgICAgICdBdXRyZScsXG4gICAgICBdKVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdkZXNlbGVjdHMgYWxsIHR5cGVzIHdoZW4gY2xpY2tpbmcgXCJEZXNlbGVjdCBhbGxcIicsICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8RmlsdGVyUGFuZWxcbiAgICAgICAgc2VsZWN0ZWRUeXBlcz17ZGVmYXVsdFNlbGVjdGVkVHlwZXN9XG4gICAgICAgIG9uRmlsdGVyQ2hhbmdlPXttb2NrT25GaWx0ZXJDaGFuZ2V9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCBkZXNlbGVjdEFsbEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ1RvdXQgZMOpc8OpbGVjdGlvbm5lcicpO1xuICAgIGZpcmVFdmVudC5jbGljayhkZXNlbGVjdEFsbEJ1dHRvbik7XG5cbiAgICBleHBlY3QobW9ja09uRmlsdGVyQ2hhbmdlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChbXSk7XG4gIH0pO1xuXG4gIGl0KCdkaXNwbGF5cyBpbml0aWF0aXZlIGNvdW50ZXJzIHdoZW4gcHJvdmlkZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgaW5pdGlhdGl2ZUNvdW50cyA9IHtcbiAgICAgIFJlc3NvdXJjZXJpZTogNSxcbiAgICAgIEFNQVA6IDMsXG4gICAgICAnUmVwYWlyIENhZsOpJzogMixcbiAgICB9O1xuXG4gICAgcmVuZGVyKFxuICAgICAgPEZpbHRlclBhbmVsXG4gICAgICAgIHNlbGVjdGVkVHlwZXM9e2RlZmF1bHRTZWxlY3RlZFR5cGVzfVxuICAgICAgICBvbkZpbHRlckNoYW5nZT17bW9ja09uRmlsdGVyQ2hhbmdlfVxuICAgICAgICBpbml0aWF0aXZlQ291bnRzPXtpbml0aWF0aXZlQ291bnRzfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJzUnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnMycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdkaXNwbGF5cyB0b3RhbCBmaWx0ZXJlZCBpbml0aWF0aXZlcycsICgpID0+IHtcbiAgICBjb25zdCBpbml0aWF0aXZlQ291bnRzID0ge1xuICAgICAgUmVzc291cmNlcmllOiA1LFxuICAgICAgQU1BUDogMyxcbiAgICAgICdSZXBhaXIgQ2Fmw6knOiAyLFxuICAgIH07XG5cbiAgICByZW5kZXIoXG4gICAgICA8RmlsdGVyUGFuZWxcbiAgICAgICAgc2VsZWN0ZWRUeXBlcz17WydSZXNzb3VyY2VyaWUnLCAnQU1BUCddfVxuICAgICAgICBvbkZpbHRlckNoYW5nZT17bW9ja09uRmlsdGVyQ2hhbmdlfVxuICAgICAgICBpbml0aWF0aXZlQ291bnRzPXtpbml0aWF0aXZlQ291bnRzfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgLy8gNSAoUmVzc291cmNlcmllKSArIDMgKEFNQVApID0gOCBzZWxlY3RlZCBvdXQgb2YgMTAgdG90YWxcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvOCBcXC8gMTAvKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ2NhbiBiZSBjb2xsYXBzZWQgYW5kIGV4cGFuZGVkJywgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxGaWx0ZXJQYW5lbFxuICAgICAgICBzZWxlY3RlZFR5cGVzPXtkZWZhdWx0U2VsZWN0ZWRUeXBlc31cbiAgICAgICAgb25GaWx0ZXJDaGFuZ2U9e21vY2tPbkZpbHRlckNoYW5nZX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIC8vIEluaXRpYWxseSBleHBhbmRlZFxuICAgIGV4cGVjdChcbiAgICAgIHNjcmVlbi5nZXRCeVJvbGUoJ2NoZWNrYm94JywgeyBuYW1lOiAvUmVzc291cmNlcmllLyB9KVxuICAgICkudG9CZVZpc2libGUoKTtcblxuICAgIC8vIENsaWNrIGNvbGxhcHNlIGJ1dHRvblxuICAgIGNvbnN0IHRvZ2dsZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnUsOpZHVpcmUnKTtcbiAgICBmaXJlRXZlbnQuY2xpY2sodG9nZ2xlQnV0dG9uKTtcblxuICAgIC8vIENoZWNrYm94ZXMgYXJlIGhpZGRlblxuICAgIGV4cGVjdChcbiAgICAgIHNjcmVlbi5xdWVyeUJ5Um9sZSgnY2hlY2tib3gnLCB7IG5hbWU6IC9SZXNzb3VyY2VyaWUvIH0pXG4gICAgKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIENsaWNrIGFnYWluIHRvIGV4cGFuZFxuICAgIGNvbnN0IGV4cGFuZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnRMOpdmVsb3BwZXInKTtcbiAgICBmaXJlRXZlbnQuY2xpY2soZXhwYW5kQnV0dG9uKTtcblxuICAgIC8vIENoZWNrYm94ZXMgYXJlIHZpc2libGUgYWdhaW5cbiAgICBleHBlY3QoXG4gICAgICBzY3JlZW4uZ2V0QnlSb2xlKCdjaGVja2JveCcsIHsgbmFtZTogL1Jlc3NvdXJjZXJpZS8gfSlcbiAgICApLnRvQmVWaXNpYmxlKCk7XG4gIH0pO1xuXG4gIGl0KCdhcHBsaWVzIGRpZmZlcmVudCB2aXN1YWwgc3R5bGVzIHRvIHNlbGVjdGVkIHR5cGVzJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgY29udGFpbmVyIH0gPSByZW5kZXIoXG4gICAgICA8RmlsdGVyUGFuZWxcbiAgICAgICAgc2VsZWN0ZWRUeXBlcz17WydSZXNzb3VyY2VyaWUnXX1cbiAgICAgICAgb25GaWx0ZXJDaGFuZ2U9e21vY2tPbkZpbHRlckNoYW5nZX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIC8vIEZpbmQgUmVzc291cmNlcmllIGxhYmVsIGFuZCB2ZXJpZnkgaXQgaGFzIHNlbGVjdGlvbiBjbGFzc1xuICAgIGNvbnN0IGxhYmVscyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdsYWJlbCcpO1xuICAgIGNvbnN0IHJlc3NvdXJjZXJpZUxhYmVsID0gQXJyYXkuZnJvbShsYWJlbHMpLmZpbmQoKGxhYmVsKSA9PlxuICAgICAgbGFiZWwudGV4dENvbnRlbnQ/LmluY2x1ZGVzKCdSZXNzb3VyY2VyaWUnKVxuICAgICk7XG5cbiAgICBleHBlY3QocmVzc291cmNlcmllTGFiZWwpLnRvSGF2ZUNsYXNzKCdiZy1wcmltYXJ5LTUwJyk7XG4gIH0pO1xuXG4gIGl0KCdkaXNwbGF5cyBjb2xvcmVkIHZpc3VhbCBpbmRpY2F0b3IgZm9yIGVhY2ggdHlwZScsICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8RmlsdGVyUGFuZWxcbiAgICAgICAgc2VsZWN0ZWRUeXBlcz17ZGVmYXVsdFNlbGVjdGVkVHlwZXN9XG4gICAgICAgIG9uRmlsdGVyQ2hhbmdlPXttb2NrT25GaWx0ZXJDaGFuZ2V9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICAvLyBWZXJpZnkgZWFjaCB0eXBlIGhhcyBpdHMgY29sb3IgaW5kaWNhdG9yXG4gICAgY29uc3QgY29sb3JJbmRpY2F0b3JzID0gc2NyZWVuXG4gICAgICAuZ2V0QWxsQnlSb2xlKCdjaGVja2JveCcpXG4gICAgICAubWFwKChjaGVja2JveCkgPT5cbiAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudD8ucXVlcnlTZWxlY3RvcignLnJvdW5kZWQtZnVsbCcpXG4gICAgICApO1xuXG4gICAgZXhwZWN0KGNvbG9ySW5kaWNhdG9ycy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICBjb2xvckluZGljYXRvcnMuZm9yRWFjaCgoaW5kaWNhdG9yKSA9PiB7XG4gICAgICBleHBlY3QoaW5kaWNhdG9yKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgnaXMgYWNjZXNzaWJsZSB3aXRoIGFwcHJvcHJpYXRlIEFSSUEgYXR0cmlidXRlcycsICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8RmlsdGVyUGFuZWxcbiAgICAgICAgc2VsZWN0ZWRUeXBlcz17ZGVmYXVsdFNlbGVjdGVkVHlwZXN9XG4gICAgICAgIG9uRmlsdGVyQ2hhbmdlPXttb2NrT25GaWx0ZXJDaGFuZ2V9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICAvLyBDaGVja2JveGVzIHNob3VsZCBiZSBhY2Nlc3NpYmxlXG4gICAgY29uc3QgY2hlY2tib3hlcyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2NoZWNrYm94Jyk7XG4gICAgY2hlY2tib3hlcy5mb3JFYWNoKChjaGVja2JveCkgPT4ge1xuICAgICAgZXhwZWN0KGNoZWNrYm94KS50b0JlRW5hYmxlZCgpO1xuICAgIH0pO1xuXG4gICAgLy8gQnV0dG9ucyBzaG91bGQgaGF2ZSBhcHByb3ByaWF0ZSBsYWJlbHNcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9Sw6lkdWlyZXxEw6l2ZWxvcHBlci8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImRlc2NyaWJlIiwibW9ja09uRmlsdGVyQ2hhbmdlIiwiamVzdCIsImZuIiwiZGVmYXVsdFNlbGVjdGVkVHlwZXMiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIml0IiwicmVuZGVyIiwiRmlsdGVyUGFuZWwiLCJzZWxlY3RlZFR5cGVzIiwib25GaWx0ZXJDaGFuZ2UiLCJleHBlY3QiLCJzY3JlZW4iLCJnZXRCeVRleHQiLCJ0b0JlSW5UaGVEb2N1bWVudCIsInJlc3NvdXJjZXJpZUNoZWNrYm94IiwiZ2V0QnlSb2xlIiwibmFtZSIsImFtYXBDaGVja2JveCIsInJlcGFpckNhZmVDaGVja2JveCIsInRvQmVDaGVja2VkIiwibm90IiwiZmlyZUV2ZW50IiwiY2xpY2siLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInNlbGVjdEFsbEJ1dHRvbiIsImFycmF5Q29udGFpbmluZyIsImRlc2VsZWN0QWxsQnV0dG9uIiwiaW5pdGlhdGl2ZUNvdW50cyIsIlJlc3NvdXJjZXJpZSIsIkFNQVAiLCJ0b0JlVmlzaWJsZSIsInRvZ2dsZUJ1dHRvbiIsImdldEJ5TGFiZWxUZXh0IiwicXVlcnlCeVJvbGUiLCJleHBhbmRCdXR0b24iLCJjb250YWluZXIiLCJsYWJlbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVzc291cmNlcmllTGFiZWwiLCJBcnJheSIsImZyb20iLCJmaW5kIiwibGFiZWwiLCJ0ZXh0Q29udGVudCIsImluY2x1ZGVzIiwidG9IYXZlQ2xhc3MiLCJjb2xvckluZGljYXRvcnMiLCJnZXRBbGxCeVJvbGUiLCJtYXAiLCJjaGVja2JveCIsInBhcmVudEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibGVuZ3RoIiwidG9CZUdyZWF0ZXJUaGFuIiwiZm9yRWFjaCIsImluZGljYXRvciIsImNoZWNrYm94ZXMiLCJ0b0JlRW5hYmxlZCJdLCJtYXBwaW5ncyI6Ijs7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