5ed9736c1219a9894fa4d353218d7718
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _FilterPanel = /*#__PURE__*/ _interop_require_default(require("../../components/FilterPanel"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
describe('FilterPanel', ()=>{
    const mockOnFilterChange = jest.fn();
    const defaultSelectedTypes = [
        'Ressourcerie',
        'AMAP'
    ];
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    it('displays all initiative types', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        expect(_react.screen.getByText('Ressourcerie')).toBeInTheDocument();
        expect(_react.screen.getByText('Repair Café')).toBeInTheDocument();
        expect(_react.screen.getByText('AMAP')).toBeInTheDocument();
        expect(_react.screen.getByText('Épicerie sociale')).toBeInTheDocument();
        expect(_react.screen.getByText('Fab Lab')).toBeInTheDocument();
    });
    it('displays selected types as checked', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        const ressourcerieCheckbox = _react.screen.getByRole('checkbox', {
            name: /Ressourcerie/
        });
        const amapCheckbox = _react.screen.getByRole('checkbox', {
            name: /AMAP/
        });
        const repairCafeCheckbox = _react.screen.getByRole('checkbox', {
            name: /Repair Café/
        });
        expect(ressourcerieCheckbox).toBeChecked();
        expect(amapCheckbox).toBeChecked();
        expect(repairCafeCheckbox).not.toBeChecked();
    });
    it('calls onFilterChange when selecting a type', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        const repairCafeCheckbox = _react.screen.getByRole('checkbox', {
            name: /Repair Café/
        });
        _react.fireEvent.click(repairCafeCheckbox);
        expect(mockOnFilterChange).toHaveBeenCalledWith([
            ...defaultSelectedTypes,
            'Repair Café'
        ]);
    });
    it('calls onFilterChange when deselecting a type', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        const ressourcerieCheckbox = _react.screen.getByRole('checkbox', {
            name: /Ressourcerie/
        });
        _react.fireEvent.click(ressourcerieCheckbox);
        expect(mockOnFilterChange).toHaveBeenCalledWith([
            'AMAP'
        ]);
    });
    it('selects all types when clicking "Select all"', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: [],
            onFilterChange: mockOnFilterChange
        }));
        const selectAllButton = _react.screen.getByText('Tout sélectionner');
        _react.fireEvent.click(selectAllButton);
        expect(mockOnFilterChange).toHaveBeenCalledWith(expect.arrayContaining([
            'Ressourcerie',
            'Repair Café',
            'AMAP',
            "Entreprise d'insertion",
            'Point de collecte',
            'Recyclerie',
            'Épicerie sociale',
            'Jardin partagé',
            'Fab Lab',
            'Coopérative',
            'Monnaie locale',
            'Tiers-lieu',
            'Autre'
        ]));
    });
    it('deselects all types when clicking "Deselect all"', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        const deselectAllButton = _react.screen.getByText('Tout désélectionner');
        _react.fireEvent.click(deselectAllButton);
        expect(mockOnFilterChange).toHaveBeenCalledWith([]);
    });
    it('displays initiative counters when provided', ()=>{
        const initiativeCounts = {
            Ressourcerie: 5,
            AMAP: 3,
            'Repair Café': 2
        };
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange,
            initiativeCounts: initiativeCounts
        }));
        expect(_react.screen.getByText('5')).toBeInTheDocument();
        expect(_react.screen.getByText('3')).toBeInTheDocument();
        expect(_react.screen.getByText('2')).toBeInTheDocument();
    });
    it('displays total filtered initiatives', ()=>{
        const initiativeCounts = {
            Ressourcerie: 5,
            AMAP: 3,
            'Repair Café': 2
        };
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: [
                'Ressourcerie',
                'AMAP'
            ],
            onFilterChange: mockOnFilterChange,
            initiativeCounts: initiativeCounts
        }));
        // 5 (Ressourcerie) + 3 (AMAP) = 8 selected out of 10 total
        expect(_react.screen.getByText(/8 \/ 10/)).toBeInTheDocument();
    });
    it('can be collapsed and expanded', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        // Initially expanded
        expect(_react.screen.getByRole('checkbox', {
            name: /Ressourcerie/
        })).toBeVisible();
        // Click collapse button
        const toggleButton = _react.screen.getByLabelText('Réduire');
        _react.fireEvent.click(toggleButton);
        // Checkboxes are hidden
        expect(_react.screen.queryByRole('checkbox', {
            name: /Ressourcerie/
        })).not.toBeInTheDocument();
        // Click again to expand
        const expandButton = _react.screen.getByLabelText('Développer');
        _react.fireEvent.click(expandButton);
        // Checkboxes are visible again
        expect(_react.screen.getByRole('checkbox', {
            name: /Ressourcerie/
        })).toBeVisible();
    });
    it('applies different visual styles to selected types', ()=>{
        const { container } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: [
                'Ressourcerie'
            ],
            onFilterChange: mockOnFilterChange
        }));
        // Find Ressourcerie label and verify it has selection class
        const labels = container.querySelectorAll('label');
        const ressourcerieLabel = Array.from(labels).find((label)=>label.textContent?.includes('Ressourcerie'));
        expect(ressourcerieLabel).toHaveClass('bg-primary/5');
        expect(ressourcerieLabel).toHaveClass('border-primary');
    });
    it('displays colored visual indicator for each type', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        // Verify each type has its color indicator
        const colorIndicators = _react.screen.getAllByRole('checkbox').map((checkbox)=>checkbox.parentElement?.querySelector('.rounded-full'));
        expect(colorIndicators.length).toBeGreaterThan(0);
        colorIndicators.forEach((indicator)=>{
            expect(indicator).toBeInTheDocument();
        });
    });
    it('is accessible with appropriate ARIA attributes', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FilterPanel.default, {
            selectedTypes: defaultSelectedTypes,
            onFilterChange: mockOnFilterChange
        }));
        // Checkboxes should be accessible
        const checkboxes = _react.screen.getAllByRole('checkbox');
        checkboxes.forEach((checkbox)=>{
            expect(checkbox).toBeEnabled();
        });
        // Buttons should have appropriate labels
        expect(_react.screen.getByLabelText(/Réduire|Développer/)).toBeInTheDocument();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9SYXBoYWVsL0RvY3VtZW50cy9ERVYubm9zeW5jL2xhbWFwL3NyYy9fX3Rlc3RzX18vY29tcG9uZW50cy9GaWx0ZXJQYW5lbC50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5cbmltcG9ydCBGaWx0ZXJQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvRmlsdGVyUGFuZWwnO1xuXG5pbXBvcnQgdHlwZSB7IEluaXRpYXRpdmVUeXBlIH0gZnJvbSAnQC90eXBlcy9pbml0aWF0aXZlJztcblxuZGVzY3JpYmUoJ0ZpbHRlclBhbmVsJywgKCkgPT4ge1xuICBjb25zdCBtb2NrT25GaWx0ZXJDaGFuZ2UgPSBqZXN0LmZuKCk7XG4gIGNvbnN0IGRlZmF1bHRTZWxlY3RlZFR5cGVzOiBJbml0aWF0aXZlVHlwZVtdID0gWydSZXNzb3VyY2VyaWUnLCAnQU1BUCddO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBpdCgnZGlzcGxheXMgYWxsIGluaXRpYXRpdmUgdHlwZXMnLCAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPEZpbHRlclBhbmVsXG4gICAgICAgIHNlbGVjdGVkVHlwZXM9e2RlZmF1bHRTZWxlY3RlZFR5cGVzfVxuICAgICAgICBvbkZpbHRlckNoYW5nZT17bW9ja09uRmlsdGVyQ2hhbmdlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Jlc3NvdXJjZXJpZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdSZXBhaXIgQ2Fmw6knKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQU1BUCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfDiXBpY2VyaWUgc29jaWFsZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdGYWIgTGFiJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdkaXNwbGF5cyBzZWxlY3RlZCB0eXBlcyBhcyBjaGVja2VkJywgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxGaWx0ZXJQYW5lbFxuICAgICAgICBzZWxlY3RlZFR5cGVzPXtkZWZhdWx0U2VsZWN0ZWRUeXBlc31cbiAgICAgICAgb25GaWx0ZXJDaGFuZ2U9e21vY2tPbkZpbHRlckNoYW5nZX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIGNvbnN0IHJlc3NvdXJjZXJpZUNoZWNrYm94ID0gc2NyZWVuLmdldEJ5Um9sZSgnY2hlY2tib3gnLCB7XG4gICAgICBuYW1lOiAvUmVzc291cmNlcmllLyxcbiAgICB9KTtcbiAgICBjb25zdCBhbWFwQ2hlY2tib3ggPSBzY3JlZW4uZ2V0QnlSb2xlKCdjaGVja2JveCcsIHsgbmFtZTogL0FNQVAvIH0pO1xuICAgIGNvbnN0IHJlcGFpckNhZmVDaGVja2JveCA9IHNjcmVlbi5nZXRCeVJvbGUoJ2NoZWNrYm94Jywge1xuICAgICAgbmFtZTogL1JlcGFpciBDYWbDqS8sXG4gICAgfSk7XG5cbiAgICBleHBlY3QocmVzc291cmNlcmllQ2hlY2tib3gpLnRvQmVDaGVja2VkKCk7XG4gICAgZXhwZWN0KGFtYXBDaGVja2JveCkudG9CZUNoZWNrZWQoKTtcbiAgICBleHBlY3QocmVwYWlyQ2FmZUNoZWNrYm94KS5ub3QudG9CZUNoZWNrZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ2NhbGxzIG9uRmlsdGVyQ2hhbmdlIHdoZW4gc2VsZWN0aW5nIGEgdHlwZScsICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8RmlsdGVyUGFuZWxcbiAgICAgICAgc2VsZWN0ZWRUeXBlcz17ZGVmYXVsdFNlbGVjdGVkVHlwZXN9XG4gICAgICAgIG9uRmlsdGVyQ2hhbmdlPXttb2NrT25GaWx0ZXJDaGFuZ2V9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCByZXBhaXJDYWZlQ2hlY2tib3ggPSBzY3JlZW4uZ2V0QnlSb2xlKCdjaGVja2JveCcsIHtcbiAgICAgIG5hbWU6IC9SZXBhaXIgQ2Fmw6kvLFxuICAgIH0pO1xuICAgIGZpcmVFdmVudC5jbGljayhyZXBhaXJDYWZlQ2hlY2tib3gpO1xuXG4gICAgZXhwZWN0KG1vY2tPbkZpbHRlckNoYW5nZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoW1xuICAgICAgLi4uZGVmYXVsdFNlbGVjdGVkVHlwZXMsXG4gICAgICAnUmVwYWlyIENhZsOpJyxcbiAgICBdKTtcbiAgfSk7XG5cbiAgaXQoJ2NhbGxzIG9uRmlsdGVyQ2hhbmdlIHdoZW4gZGVzZWxlY3RpbmcgYSB0eXBlJywgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxGaWx0ZXJQYW5lbFxuICAgICAgICBzZWxlY3RlZFR5cGVzPXtkZWZhdWx0U2VsZWN0ZWRUeXBlc31cbiAgICAgICAgb25GaWx0ZXJDaGFuZ2U9e21vY2tPbkZpbHRlckNoYW5nZX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIGNvbnN0IHJlc3NvdXJjZXJpZUNoZWNrYm94ID0gc2NyZWVuLmdldEJ5Um9sZSgnY2hlY2tib3gnLCB7XG4gICAgICBuYW1lOiAvUmVzc291cmNlcmllLyxcbiAgICB9KTtcbiAgICBmaXJlRXZlbnQuY2xpY2socmVzc291cmNlcmllQ2hlY2tib3gpO1xuXG4gICAgZXhwZWN0KG1vY2tPbkZpbHRlckNoYW5nZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoWydBTUFQJ10pO1xuICB9KTtcblxuICBpdCgnc2VsZWN0cyBhbGwgdHlwZXMgd2hlbiBjbGlja2luZyBcIlNlbGVjdCBhbGxcIicsICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8RmlsdGVyUGFuZWwgc2VsZWN0ZWRUeXBlcz17W119IG9uRmlsdGVyQ2hhbmdlPXttb2NrT25GaWx0ZXJDaGFuZ2V9IC8+XG4gICAgKTtcblxuICAgIGNvbnN0IHNlbGVjdEFsbEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ1RvdXQgc8OpbGVjdGlvbm5lcicpO1xuICAgIGZpcmVFdmVudC5jbGljayhzZWxlY3RBbGxCdXR0b24pO1xuXG4gICAgZXhwZWN0KG1vY2tPbkZpbHRlckNoYW5nZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICBleHBlY3QuYXJyYXlDb250YWluaW5nKFtcbiAgICAgICAgJ1Jlc3NvdXJjZXJpZScsXG4gICAgICAgICdSZXBhaXIgQ2Fmw6knLFxuICAgICAgICAnQU1BUCcsXG4gICAgICAgIFwiRW50cmVwcmlzZSBkJ2luc2VydGlvblwiLFxuICAgICAgICAnUG9pbnQgZGUgY29sbGVjdGUnLFxuICAgICAgICAnUmVjeWNsZXJpZScsXG4gICAgICAgICfDiXBpY2VyaWUgc29jaWFsZScsXG4gICAgICAgICdKYXJkaW4gcGFydGFnw6knLFxuICAgICAgICAnRmFiIExhYicsXG4gICAgICAgICdDb29ww6lyYXRpdmUnLFxuICAgICAgICAnTW9ubmFpZSBsb2NhbGUnLFxuICAgICAgICAnVGllcnMtbGlldScsXG4gICAgICAgICdBdXRyZScsXG4gICAgICBdKVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdkZXNlbGVjdHMgYWxsIHR5cGVzIHdoZW4gY2xpY2tpbmcgXCJEZXNlbGVjdCBhbGxcIicsICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8RmlsdGVyUGFuZWxcbiAgICAgICAgc2VsZWN0ZWRUeXBlcz17ZGVmYXVsdFNlbGVjdGVkVHlwZXN9XG4gICAgICAgIG9uRmlsdGVyQ2hhbmdlPXttb2NrT25GaWx0ZXJDaGFuZ2V9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCBkZXNlbGVjdEFsbEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ1RvdXQgZMOpc8OpbGVjdGlvbm5lcicpO1xuICAgIGZpcmVFdmVudC5jbGljayhkZXNlbGVjdEFsbEJ1dHRvbik7XG5cbiAgICBleHBlY3QobW9ja09uRmlsdGVyQ2hhbmdlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChbXSk7XG4gIH0pO1xuXG4gIGl0KCdkaXNwbGF5cyBpbml0aWF0aXZlIGNvdW50ZXJzIHdoZW4gcHJvdmlkZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgaW5pdGlhdGl2ZUNvdW50cyA9IHtcbiAgICAgIFJlc3NvdXJjZXJpZTogNSxcbiAgICAgIEFNQVA6IDMsXG4gICAgICAnUmVwYWlyIENhZsOpJzogMixcbiAgICB9O1xuXG4gICAgcmVuZGVyKFxuICAgICAgPEZpbHRlclBhbmVsXG4gICAgICAgIHNlbGVjdGVkVHlwZXM9e2RlZmF1bHRTZWxlY3RlZFR5cGVzfVxuICAgICAgICBvbkZpbHRlckNoYW5nZT17bW9ja09uRmlsdGVyQ2hhbmdlfVxuICAgICAgICBpbml0aWF0aXZlQ291bnRzPXtpbml0aWF0aXZlQ291bnRzfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJzUnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnMycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdkaXNwbGF5cyB0b3RhbCBmaWx0ZXJlZCBpbml0aWF0aXZlcycsICgpID0+IHtcbiAgICBjb25zdCBpbml0aWF0aXZlQ291bnRzID0ge1xuICAgICAgUmVzc291cmNlcmllOiA1LFxuICAgICAgQU1BUDogMyxcbiAgICAgICdSZXBhaXIgQ2Fmw6knOiAyLFxuICAgIH07XG5cbiAgICByZW5kZXIoXG4gICAgICA8RmlsdGVyUGFuZWxcbiAgICAgICAgc2VsZWN0ZWRUeXBlcz17WydSZXNzb3VyY2VyaWUnLCAnQU1BUCddfVxuICAgICAgICBvbkZpbHRlckNoYW5nZT17bW9ja09uRmlsdGVyQ2hhbmdlfVxuICAgICAgICBpbml0aWF0aXZlQ291bnRzPXtpbml0aWF0aXZlQ291bnRzfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgLy8gNSAoUmVzc291cmNlcmllKSArIDMgKEFNQVApID0gOCBzZWxlY3RlZCBvdXQgb2YgMTAgdG90YWxcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvOCBcXC8gMTAvKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ2NhbiBiZSBjb2xsYXBzZWQgYW5kIGV4cGFuZGVkJywgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxGaWx0ZXJQYW5lbFxuICAgICAgICBzZWxlY3RlZFR5cGVzPXtkZWZhdWx0U2VsZWN0ZWRUeXBlc31cbiAgICAgICAgb25GaWx0ZXJDaGFuZ2U9e21vY2tPbkZpbHRlckNoYW5nZX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIC8vIEluaXRpYWxseSBleHBhbmRlZFxuICAgIGV4cGVjdChcbiAgICAgIHNjcmVlbi5nZXRCeVJvbGUoJ2NoZWNrYm94JywgeyBuYW1lOiAvUmVzc291cmNlcmllLyB9KVxuICAgICkudG9CZVZpc2libGUoKTtcblxuICAgIC8vIENsaWNrIGNvbGxhcHNlIGJ1dHRvblxuICAgIGNvbnN0IHRvZ2dsZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnUsOpZHVpcmUnKTtcbiAgICBmaXJlRXZlbnQuY2xpY2sodG9nZ2xlQnV0dG9uKTtcblxuICAgIC8vIENoZWNrYm94ZXMgYXJlIGhpZGRlblxuICAgIGV4cGVjdChcbiAgICAgIHNjcmVlbi5xdWVyeUJ5Um9sZSgnY2hlY2tib3gnLCB7IG5hbWU6IC9SZXNzb3VyY2VyaWUvIH0pXG4gICAgKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIENsaWNrIGFnYWluIHRvIGV4cGFuZFxuICAgIGNvbnN0IGV4cGFuZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnRMOpdmVsb3BwZXInKTtcbiAgICBmaXJlRXZlbnQuY2xpY2soZXhwYW5kQnV0dG9uKTtcblxuICAgIC8vIENoZWNrYm94ZXMgYXJlIHZpc2libGUgYWdhaW5cbiAgICBleHBlY3QoXG4gICAgICBzY3JlZW4uZ2V0QnlSb2xlKCdjaGVja2JveCcsIHsgbmFtZTogL1Jlc3NvdXJjZXJpZS8gfSlcbiAgICApLnRvQmVWaXNpYmxlKCk7XG4gIH0pO1xuXG4gIGl0KCdhcHBsaWVzIGRpZmZlcmVudCB2aXN1YWwgc3R5bGVzIHRvIHNlbGVjdGVkIHR5cGVzJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgY29udGFpbmVyIH0gPSByZW5kZXIoXG4gICAgICA8RmlsdGVyUGFuZWxcbiAgICAgICAgc2VsZWN0ZWRUeXBlcz17WydSZXNzb3VyY2VyaWUnXX1cbiAgICAgICAgb25GaWx0ZXJDaGFuZ2U9e21vY2tPbkZpbHRlckNoYW5nZX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIC8vIEZpbmQgUmVzc291cmNlcmllIGxhYmVsIGFuZCB2ZXJpZnkgaXQgaGFzIHNlbGVjdGlvbiBjbGFzc1xuICAgIGNvbnN0IGxhYmVscyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdsYWJlbCcpO1xuICAgIGNvbnN0IHJlc3NvdXJjZXJpZUxhYmVsID0gQXJyYXkuZnJvbShsYWJlbHMpLmZpbmQoKGxhYmVsKSA9PlxuICAgICAgbGFiZWwudGV4dENvbnRlbnQ/LmluY2x1ZGVzKCdSZXNzb3VyY2VyaWUnKVxuICAgICk7XG5cbiAgICBleHBlY3QocmVzc291cmNlcmllTGFiZWwpLnRvSGF2ZUNsYXNzKCdiZy1wcmltYXJ5LzUnKTtcbiAgICBleHBlY3QocmVzc291cmNlcmllTGFiZWwpLnRvSGF2ZUNsYXNzKCdib3JkZXItcHJpbWFyeScpO1xuICB9KTtcblxuICBpdCgnZGlzcGxheXMgY29sb3JlZCB2aXN1YWwgaW5kaWNhdG9yIGZvciBlYWNoIHR5cGUnLCAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPEZpbHRlclBhbmVsXG4gICAgICAgIHNlbGVjdGVkVHlwZXM9e2RlZmF1bHRTZWxlY3RlZFR5cGVzfVxuICAgICAgICBvbkZpbHRlckNoYW5nZT17bW9ja09uRmlsdGVyQ2hhbmdlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgLy8gVmVyaWZ5IGVhY2ggdHlwZSBoYXMgaXRzIGNvbG9yIGluZGljYXRvclxuICAgIGNvbnN0IGNvbG9ySW5kaWNhdG9ycyA9IHNjcmVlblxuICAgICAgLmdldEFsbEJ5Um9sZSgnY2hlY2tib3gnKVxuICAgICAgLm1hcCgoY2hlY2tib3gpID0+XG4gICAgICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQ/LnF1ZXJ5U2VsZWN0b3IoJy5yb3VuZGVkLWZ1bGwnKVxuICAgICAgKTtcblxuICAgIGV4cGVjdChjb2xvckluZGljYXRvcnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgY29sb3JJbmRpY2F0b3JzLmZvckVhY2goKGluZGljYXRvcikgPT4ge1xuICAgICAgZXhwZWN0KGluZGljYXRvcikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ2lzIGFjY2Vzc2libGUgd2l0aCBhcHByb3ByaWF0ZSBBUklBIGF0dHJpYnV0ZXMnLCAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPEZpbHRlclBhbmVsXG4gICAgICAgIHNlbGVjdGVkVHlwZXM9e2RlZmF1bHRTZWxlY3RlZFR5cGVzfVxuICAgICAgICBvbkZpbHRlckNoYW5nZT17bW9ja09uRmlsdGVyQ2hhbmdlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgLy8gQ2hlY2tib3hlcyBzaG91bGQgYmUgYWNjZXNzaWJsZVxuICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdjaGVja2JveCcpO1xuICAgIGNoZWNrYm94ZXMuZm9yRWFjaCgoY2hlY2tib3gpID0+IHtcbiAgICAgIGV4cGVjdChjaGVja2JveCkudG9CZUVuYWJsZWQoKTtcbiAgICB9KTtcblxuICAgIC8vIEJ1dHRvbnMgc2hvdWxkIGhhdmUgYXBwcm9wcmlhdGUgbGFiZWxzXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvUsOpZHVpcmV8RMOpdmVsb3BwZXIvKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJkZXNjcmliZSIsIm1vY2tPbkZpbHRlckNoYW5nZSIsImplc3QiLCJmbiIsImRlZmF1bHRTZWxlY3RlZFR5cGVzIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsInJlbmRlciIsIkZpbHRlclBhbmVsIiwic2VsZWN0ZWRUeXBlcyIsIm9uRmlsdGVyQ2hhbmdlIiwiZXhwZWN0Iiwic2NyZWVuIiwiZ2V0QnlUZXh0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJyZXNzb3VyY2VyaWVDaGVja2JveCIsImdldEJ5Um9sZSIsIm5hbWUiLCJhbWFwQ2hlY2tib3giLCJyZXBhaXJDYWZlQ2hlY2tib3giLCJ0b0JlQ2hlY2tlZCIsIm5vdCIsImZpcmVFdmVudCIsImNsaWNrIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJzZWxlY3RBbGxCdXR0b24iLCJhcnJheUNvbnRhaW5pbmciLCJkZXNlbGVjdEFsbEJ1dHRvbiIsImluaXRpYXRpdmVDb3VudHMiLCJSZXNzb3VyY2VyaWUiLCJBTUFQIiwidG9CZVZpc2libGUiLCJ0b2dnbGVCdXR0b24iLCJnZXRCeUxhYmVsVGV4dCIsInF1ZXJ5QnlSb2xlIiwiZXhwYW5kQnV0dG9uIiwiY29udGFpbmVyIiwibGFiZWxzIiwicXVlcnlTZWxlY3RvckFsbCIsInJlc3NvdXJjZXJpZUxhYmVsIiwiQXJyYXkiLCJmcm9tIiwiZmluZCIsImxhYmVsIiwidGV4dENvbnRlbnQiLCJpbmNsdWRlcyIsInRvSGF2ZUNsYXNzIiwiY29sb3JJbmRpY2F0b3JzIiwiZ2V0QWxsQnlSb2xlIiwibWFwIiwiY2hlY2tib3giLCJwYXJlbnRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsImZvckVhY2giLCJpbmRpY2F0b3IiLCJjaGVja2JveGVzIiwidG9CZUVuYWJsZWQiXSwibWFwcGluZ3MiOiI7Ozs7O3VCQUEwQztvRUFFbEI7Ozs7OztBQUl4QkEsU0FBUyxlQUFlO0lBQ3RCLE1BQU1DLHFCQUFxQkMsS0FBS0MsRUFBRTtJQUNsQyxNQUFNQyx1QkFBeUM7UUFBQztRQUFnQjtLQUFPO0lBRXZFQyxXQUFXO1FBQ1RILEtBQUtJLGFBQWE7SUFDcEI7SUFFQUMsR0FBRyxpQ0FBaUM7UUFDbENDLElBQUFBLGFBQU0sZ0JBQ0oscUJBQUNDLG9CQUFXO1lBQ1ZDLGVBQWVOO1lBQ2ZPLGdCQUFnQlY7O1FBSXBCVyxPQUFPQyxhQUFNLENBQUNDLFNBQVMsQ0FBQyxpQkFBaUJDLGlCQUFpQjtRQUMxREgsT0FBT0MsYUFBTSxDQUFDQyxTQUFTLENBQUMsZ0JBQWdCQyxpQkFBaUI7UUFDekRILE9BQU9DLGFBQU0sQ0FBQ0MsU0FBUyxDQUFDLFNBQVNDLGlCQUFpQjtRQUNsREgsT0FBT0MsYUFBTSxDQUFDQyxTQUFTLENBQUMscUJBQXFCQyxpQkFBaUI7UUFDOURILE9BQU9DLGFBQU0sQ0FBQ0MsU0FBUyxDQUFDLFlBQVlDLGlCQUFpQjtJQUN2RDtJQUVBUixHQUFHLHNDQUFzQztRQUN2Q0MsSUFBQUEsYUFBTSxnQkFDSixxQkFBQ0Msb0JBQVc7WUFDVkMsZUFBZU47WUFDZk8sZ0JBQWdCVjs7UUFJcEIsTUFBTWUsdUJBQXVCSCxhQUFNLENBQUNJLFNBQVMsQ0FBQyxZQUFZO1lBQ3hEQyxNQUFNO1FBQ1I7UUFDQSxNQUFNQyxlQUFlTixhQUFNLENBQUNJLFNBQVMsQ0FBQyxZQUFZO1lBQUVDLE1BQU07UUFBTztRQUNqRSxNQUFNRSxxQkFBcUJQLGFBQU0sQ0FBQ0ksU0FBUyxDQUFDLFlBQVk7WUFDdERDLE1BQU07UUFDUjtRQUVBTixPQUFPSSxzQkFBc0JLLFdBQVc7UUFDeENULE9BQU9PLGNBQWNFLFdBQVc7UUFDaENULE9BQU9RLG9CQUFvQkUsR0FBRyxDQUFDRCxXQUFXO0lBQzVDO0lBRUFkLEdBQUcsOENBQThDO1FBQy9DQyxJQUFBQSxhQUFNLGdCQUNKLHFCQUFDQyxvQkFBVztZQUNWQyxlQUFlTjtZQUNmTyxnQkFBZ0JWOztRQUlwQixNQUFNbUIscUJBQXFCUCxhQUFNLENBQUNJLFNBQVMsQ0FBQyxZQUFZO1lBQ3REQyxNQUFNO1FBQ1I7UUFDQUssZ0JBQVMsQ0FBQ0MsS0FBSyxDQUFDSjtRQUVoQlIsT0FBT1gsb0JBQW9Cd0Isb0JBQW9CLENBQUM7ZUFDM0NyQjtZQUNIO1NBQ0Q7SUFDSDtJQUVBRyxHQUFHLGdEQUFnRDtRQUNqREMsSUFBQUEsYUFBTSxnQkFDSixxQkFBQ0Msb0JBQVc7WUFDVkMsZUFBZU47WUFDZk8sZ0JBQWdCVjs7UUFJcEIsTUFBTWUsdUJBQXVCSCxhQUFNLENBQUNJLFNBQVMsQ0FBQyxZQUFZO1lBQ3hEQyxNQUFNO1FBQ1I7UUFDQUssZ0JBQVMsQ0FBQ0MsS0FBSyxDQUFDUjtRQUVoQkosT0FBT1gsb0JBQW9Cd0Isb0JBQW9CLENBQUM7WUFBQztTQUFPO0lBQzFEO0lBRUFsQixHQUFHLGdEQUFnRDtRQUNqREMsSUFBQUEsYUFBTSxnQkFDSixxQkFBQ0Msb0JBQVc7WUFBQ0MsZUFBZSxFQUFFO1lBQUVDLGdCQUFnQlY7O1FBR2xELE1BQU15QixrQkFBa0JiLGFBQU0sQ0FBQ0MsU0FBUyxDQUFDO1FBQ3pDUyxnQkFBUyxDQUFDQyxLQUFLLENBQUNFO1FBRWhCZCxPQUFPWCxvQkFBb0J3QixvQkFBb0IsQ0FDN0NiLE9BQU9lLGVBQWUsQ0FBQztZQUNyQjtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtTQUNEO0lBRUw7SUFFQXBCLEdBQUcsb0RBQW9EO1FBQ3JEQyxJQUFBQSxhQUFNLGdCQUNKLHFCQUFDQyxvQkFBVztZQUNWQyxlQUFlTjtZQUNmTyxnQkFBZ0JWOztRQUlwQixNQUFNMkIsb0JBQW9CZixhQUFNLENBQUNDLFNBQVMsQ0FBQztRQUMzQ1MsZ0JBQVMsQ0FBQ0MsS0FBSyxDQUFDSTtRQUVoQmhCLE9BQU9YLG9CQUFvQndCLG9CQUFvQixDQUFDLEVBQUU7SUFDcEQ7SUFFQWxCLEdBQUcsOENBQThDO1FBQy9DLE1BQU1zQixtQkFBbUI7WUFDdkJDLGNBQWM7WUFDZEMsTUFBTTtZQUNOLGVBQWU7UUFDakI7UUFFQXZCLElBQUFBLGFBQU0sZ0JBQ0oscUJBQUNDLG9CQUFXO1lBQ1ZDLGVBQWVOO1lBQ2ZPLGdCQUFnQlY7WUFDaEI0QixrQkFBa0JBOztRQUl0QmpCLE9BQU9DLGFBQU0sQ0FBQ0MsU0FBUyxDQUFDLE1BQU1DLGlCQUFpQjtRQUMvQ0gsT0FBT0MsYUFBTSxDQUFDQyxTQUFTLENBQUMsTUFBTUMsaUJBQWlCO1FBQy9DSCxPQUFPQyxhQUFNLENBQUNDLFNBQVMsQ0FBQyxNQUFNQyxpQkFBaUI7SUFDakQ7SUFFQVIsR0FBRyx1Q0FBdUM7UUFDeEMsTUFBTXNCLG1CQUFtQjtZQUN2QkMsY0FBYztZQUNkQyxNQUFNO1lBQ04sZUFBZTtRQUNqQjtRQUVBdkIsSUFBQUEsYUFBTSxnQkFDSixxQkFBQ0Msb0JBQVc7WUFDVkMsZUFBZTtnQkFBQztnQkFBZ0I7YUFBTztZQUN2Q0MsZ0JBQWdCVjtZQUNoQjRCLGtCQUFrQkE7O1FBSXRCLDJEQUEyRDtRQUMzRGpCLE9BQU9DLGFBQU0sQ0FBQ0MsU0FBUyxDQUFDLFlBQVlDLGlCQUFpQjtJQUN2RDtJQUVBUixHQUFHLGlDQUFpQztRQUNsQ0MsSUFBQUEsYUFBTSxnQkFDSixxQkFBQ0Msb0JBQVc7WUFDVkMsZUFBZU47WUFDZk8sZ0JBQWdCVjs7UUFJcEIscUJBQXFCO1FBQ3JCVyxPQUNFQyxhQUFNLENBQUNJLFNBQVMsQ0FBQyxZQUFZO1lBQUVDLE1BQU07UUFBZSxJQUNwRGMsV0FBVztRQUViLHdCQUF3QjtRQUN4QixNQUFNQyxlQUFlcEIsYUFBTSxDQUFDcUIsY0FBYyxDQUFDO1FBQzNDWCxnQkFBUyxDQUFDQyxLQUFLLENBQUNTO1FBRWhCLHdCQUF3QjtRQUN4QnJCLE9BQ0VDLGFBQU0sQ0FBQ3NCLFdBQVcsQ0FBQyxZQUFZO1lBQUVqQixNQUFNO1FBQWUsSUFDdERJLEdBQUcsQ0FBQ1AsaUJBQWlCO1FBRXZCLHdCQUF3QjtRQUN4QixNQUFNcUIsZUFBZXZCLGFBQU0sQ0FBQ3FCLGNBQWMsQ0FBQztRQUMzQ1gsZ0JBQVMsQ0FBQ0MsS0FBSyxDQUFDWTtRQUVoQiwrQkFBK0I7UUFDL0J4QixPQUNFQyxhQUFNLENBQUNJLFNBQVMsQ0FBQyxZQUFZO1lBQUVDLE1BQU07UUFBZSxJQUNwRGMsV0FBVztJQUNmO0lBRUF6QixHQUFHLHFEQUFxRDtRQUN0RCxNQUFNLEVBQUU4QixTQUFTLEVBQUUsR0FBRzdCLElBQUFBLGFBQU0sZ0JBQzFCLHFCQUFDQyxvQkFBVztZQUNWQyxlQUFlO2dCQUFDO2FBQWU7WUFDL0JDLGdCQUFnQlY7O1FBSXBCLDREQUE0RDtRQUM1RCxNQUFNcUMsU0FBU0QsVUFBVUUsZ0JBQWdCLENBQUM7UUFDMUMsTUFBTUMsb0JBQW9CQyxNQUFNQyxJQUFJLENBQUNKLFFBQVFLLElBQUksQ0FBQyxDQUFDQyxRQUNqREEsTUFBTUMsV0FBVyxFQUFFQyxTQUFTO1FBRzlCbEMsT0FBTzRCLG1CQUFtQk8sV0FBVyxDQUFDO1FBQ3RDbkMsT0FBTzRCLG1CQUFtQk8sV0FBVyxDQUFDO0lBQ3hDO0lBRUF4QyxHQUFHLG1EQUFtRDtRQUNwREMsSUFBQUEsYUFBTSxnQkFDSixxQkFBQ0Msb0JBQVc7WUFDVkMsZUFBZU47WUFDZk8sZ0JBQWdCVjs7UUFJcEIsMkNBQTJDO1FBQzNDLE1BQU0rQyxrQkFBa0JuQyxhQUFNLENBQzNCb0MsWUFBWSxDQUFDLFlBQ2JDLEdBQUcsQ0FBQyxDQUFDQyxXQUNKQSxTQUFTQyxhQUFhLEVBQUVDLGNBQWM7UUFHMUN6QyxPQUFPb0MsZ0JBQWdCTSxNQUFNLEVBQUVDLGVBQWUsQ0FBQztRQUMvQ1AsZ0JBQWdCUSxPQUFPLENBQUMsQ0FBQ0M7WUFDdkI3QyxPQUFPNkMsV0FBVzFDLGlCQUFpQjtRQUNyQztJQUNGO0lBRUFSLEdBQUcsa0RBQWtEO1FBQ25EQyxJQUFBQSxhQUFNLGdCQUNKLHFCQUFDQyxvQkFBVztZQUNWQyxlQUFlTjtZQUNmTyxnQkFBZ0JWOztRQUlwQixrQ0FBa0M7UUFDbEMsTUFBTXlELGFBQWE3QyxhQUFNLENBQUNvQyxZQUFZLENBQUM7UUFDdkNTLFdBQVdGLE9BQU8sQ0FBQyxDQUFDTDtZQUNsQnZDLE9BQU91QyxVQUFVUSxXQUFXO1FBQzlCO1FBRUEseUNBQXlDO1FBQ3pDL0MsT0FBT0MsYUFBTSxDQUFDcUIsY0FBYyxDQUFDLHVCQUF1Qm5CLGlCQUFpQjtJQUN2RTtBQUNGIn0=